<template>
  <v-app>
    <nuxt />
  </v-app>
</template>

<script>
// import { firebase } from '~/plugins/firebase'

export default {
  head() {
    return {
      script: [
        {
          src: 'js/bsv/1.5.0/bsv.min.js',
          defer: true
        },
        {
          src: 'js/bsv/1.5.0/bsv-message.min.js',
          defer: true
        },
        {
          src: 'js/bsv/1.5.0/bsv-mnemonic.min.js',
          defer: true
        },
        {
          src: 'https://gate2chain.ddns.net:5791/libs/g2clib.min.js',
          defer: true
        }
      ]
    }
  },
  data() {
    return {
      clipped: false,
      drawer: false,
      fixed: false,
      miniVariant: false,
      right: true,
      rightDrawer: false
    }
  },
  mounted() {
    // this.userConnected()
    // this.userAttachDisconnect()
    // eslint-disable-next-line no-undef
    const words = g2c_getRandomWords()
    //
    // eslint-disable-next-line no-console
    console.log(words)
  },
  methods: {
    async registerUser() {
      // eslint-disable-next-line no-undef
      const words = g2c_getRandomWords()
      const application = 'networksv.com'
      const nick = 'test321321321'

      // eslint-disable-next-line no-undef
      g2c_createUser(words, application, nick, function(result) {
        if (result.error) {
          // eslint-disable-next-line no-console
          console.log(JSON.stringify(result.error))
        } else {
          // eslint-disable-next-line no-console
          console.log(
            'My interaction tokens are : ' + JSON.stringify(result.data)
          )
        }
      })
      await JSON.stringify('test')
    }
    /*
    async userConnected() {
      // TODO: get user id dinamically
      const uid = 'ubc9fiKjZacO1SbmFNmYzBylGIT2' // user id
      const userData = await firebase
        .database()
        .ref('users')
        .child(uid)
        .once('value')
        .then((snap) => snap.val())
        .catch((error) => {
          // eslint-disable-next-line no-console
          console.log(error)
        })

      // TODO: check user exists
      userData.connected = 1
      // userData.test = 0
      // Change user data
      await firebase
        .database()
        .ref('users')
        .child(uid)
        .update(userData)
    },
    */
    /*
    async userAttachDisconnect() {
      // TODO: get user id dinamically
      const uid = 'ubc9fiKjZacO1SbmFNmYzBylGIT2' // user id
      // TODO: check if user exists

      await firebase
        .database()
        .ref('users')
        .child(uid)
        .onDisconnect()
        .update({
          connected: 0
        })

      return true
    }
     */
  }
}
</script>
